通过 FallbackHeaders 工厂，你可以在转发到外部应用程序中的 fallbackUri 的请求的header中添加Spring Cloud CircuitBreaker的执行异常细节，如以下场景。

_Example 31. application.yml_



```plain
spring:
  cloud:
    gateway:
      routes:
      - id: ingredients
        uri: lb://ingredients
        predicates:
        - Path=//ingredients/**
        filters:
        - name: CircuitBreaker
          args:
            name: fetchIngredients
            fallbackUri: forward:/fallback
      - id: ingredients-fallback
        uri: http://localhost:9994
        predicates:
        - Path=/fallback
        filters:
        - name: FallbackHeaders
          args:
            executionExceptionTypeHeaderName: Test-Header
```



在这个例子中，在运行断路器时发生执行异常后，请求被转发到运行在 localhost:9994 的应用程序中的 fallback 端点或 handler。带有异常类型、消息和（如果有）根本原因的异常类型和消息的 header 被 FallbackHeaders 过滤器添加到该请求中。

你可以通过设置以下参数的值（显示为默认值）来覆盖配置中header的名称。

+ executionExceptionTypeHeaderName ("Execution-Exception-Type")
+ executionExceptionMessageHeaderName ("Execution-Exception-Message")
+ rootCauseExceptionTypeHeaderName ("Root-Cause-Exception-Type")
+ rootCauseExceptionMessageHeaderName ("Root-Cause-Exception-Message")

关于断路器和网关的更多信息，请参见 [Spring Cloud CircuitBreaker Factory 部分](https://springdoc.cn/spring-cloud-gateway/#spring-cloud-circuitbreaker-filter-factory) 。

