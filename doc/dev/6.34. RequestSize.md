当请求的大小超过允许的限制时，RequestSize GatewayFilter 工厂可以限制请求到达下游服务。该过滤器需要一个 maxSize 参数。maxSize 是一个 DataSize 类型，所以值可以定义为一个数字，后面有一个可选的 DataUnit 后缀，如 'KB' 或’MB'。默认是 'B'，表示字节。它是以字节为单位定义的请求的可允许的大小限制。下面的列表配置了一个 RequestSize GatewayFilter。

_Example 61. application.yml_



```plain
spring:
  cloud:
    gateway:
      routes:
      - id: request_size_route
        uri: http://localhost:8080/upload
        predicates:
        - Path=/upload
        filters:
        - name: RequestSize
          args:
            maxSize: 5000000
```



RequestSize GatewayFilter 工厂将响应状态设置为 413 Payload Too Large，当请求由于大小而被拒绝时，会有一个额外的头 errorMessage。下面的例子显示了这样一个 errorMessage。



```plain
errorMessage : Request size is larger than permissible limit. Request size is 6.0 MB where permissible limit is 5.0 MB
```



| 如果在路由定义中没有提供filter参数，默认请求大小被设置为5MB。 |
| --- |


