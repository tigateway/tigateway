如果位于 ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR exchange 属性中的URL有 ws 或 wss scheme，则运行 websocket 路由过滤器。它使用Spring WebSocket 基础设施将 websocket 请求转发到下游。

你可以通过给URI加上 lb 的前缀来实现websockets的负载均衡，比如 lb:ws://serviceid。

| 如果你使用 [SockJS](https://github.com/sockjs)<br/> 作为普通HTTP的后备方案，你应该配置一个普通的HTTP路由以及websocket路由。 |
| --- |


下面配置了一个websocket路由过滤器。

_Example 66. application.yml_



```plain
spring:
  cloud:
    gateway:
      routes:
      # SockJS route
      - id: websocket_sockjs_route
        uri: http://localhost:3001
        predicates:
        - Path=/websocket/info/**
      # Normal Websocket route
      - id: websocket_route
        uri: ws://localhost:3001
        predicates:
        - Path=/websocket/**
```



  


